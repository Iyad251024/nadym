<div class="page-header">
  <div class="container">
    <h1>Rappels médicamenteux</h1>
    <p>Gestion des notifications de prise</p>
  </div>
</div>

<div class="container">
  <!-- Active Reminders -->
  <mat-card class="reminders-card">
    <mat-card-header>
      <mat-card-title>Rappels configurés</mat-card-title>
      <mat-card-subtitle>{{ getActiveRemindersCount() }} rappels actifs</mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <div class="reminders-list">
        <div *ngFor="let reminder of reminders" class="reminder-item" 
             [class.inactive]="!reminder.isActive"
             [class.upcoming]="isUpcoming(reminder.nextReminder)">
          
          <div class="reminder-icon">
            <mat-icon [color]="reminder.isActive ? 'primary' : 'disabled'">
              {{ getTypeIcon(reminder.type) }}
            </mat-icon>
          </div>
          
          <div class="reminder-info">
            <div class="medication-details">
              <h3>{{ reminder.medicationName }}</h3>
              <p>{{ reminder.dosage }} - {{ reminder.frequency }}</p>
            </div>
            
            <div class="reminder-schedule">
              <div class="schedule-item">
                <mat-icon>schedule</mat-icon>
                <span>{{ reminder.reminderTime }}</span>
              </div>
              
              <div class="schedule-item" *ngIf="reminder.lastSent">
                <mat-icon>history</mat-icon>
                <span>Dernier: {{ formatDateTime(reminder.lastSent) }}</span>
              </div>
              
              <div class="schedule-item next-reminder" 
                   [class.upcoming]="isUpcoming(reminder.nextReminder)">
                <mat-icon>notifications</mat-icon>
                <span>Prochain: {{ formatDateTime(reminder.nextReminder) }}</span>
              </div>
            </div>
          </div>
          
          <div class="reminder-controls">
            <mat-slide-toggle 
              [checked]="reminder.isActive"
              (change)="toggleReminder(reminder)"
              [color]="'primary'">
            </mat-slide-toggle>
            
            <button mat-icon-button>
              <mat-icon>edit</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Reminder Settings -->
  <mat-card class="settings-card">
    <mat-card-header>
      <mat-card-title>Paramètres des rappels</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <div class="settings-grid">
        <div class="setting-item">
          <mat-icon>notifications</mat-icon>
          <div class="setting-info">
            <h4>Notifications push</h4>
            <p>Recevoir des notifications sur l'appareil</p>
          </div>
          <mat-slide-toggle [checked]="true" color="primary"></mat-slide-toggle>
        </div>
        
        <div class="setting-item">
          <mat-icon>email</mat-icon>
          <div class="setting-info">
            <h4>Rappels par email</h4>
            <p>Recevoir des rappels par email</p>
          </div>
          <mat-slide-toggle [checked]="false" color="primary"></mat-slide-toggle>
        </div>
        
        <div class="setting-item">
          <mat-icon>sms</mat-icon>
          <div class="setting-info">
            <h4>Rappels par SMS</h4>
            <p>Recevoir des rappels par SMS</p>
          </div>
          <mat-slide-toggle [checked]="true" color="primary"></mat-slide-toggle>
        </div>
        
        <div class="setting-item">
          <mat-icon>snooze</mat-icon>
          <div class="setting-info">
            <h4>Répétition automatique</h4>
            <p>Répéter le rappel si non confirmé</p>
          </div>
          <mat-slide-toggle [checked]="true" color="primary"></mat-slide-toggle>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Loading Spinner -->
  <div class="loading-spinner" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>
</div>